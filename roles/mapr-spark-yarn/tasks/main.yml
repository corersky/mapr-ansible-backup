---
# Install Spark on YARN
- name: Install mapr-spark
  yum: name={{ item }} state=present
  with_items:
  - mapr-spark
  - mapr-spark-historyserver
  when: ansible_os_family == 'RedHat'
- name: Create maprfs:///apps/spark
  shell: hadoop fs -mkdir -p /apps/spark
- name: Owner maprfs:///apps/spark
  shell: hadoop fs -chown mapr:mapr /apps/spark
- name: Configure.sh -R
  shell: /opt/mapr/server/configure.sh -R
- name: Set owner mapr-system user
  file: path=/opt/mapr/spark owner={{ mapr_user }} group={{ mapr_group }} state=directory recurse=yes